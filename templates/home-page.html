{% extends 'base.html' %}
{% block title %}
  <title>Home Page</title>
{% endblock %}
{% block content %}
  <div class="container-fluid py-3">
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card shadow-sm rounded-3">
          <div class="card-header bg-primary text-white text-center fs-3 fw-bold">
            {% if search_date %}
              Rapport du {{ search_date }}
            {% else %}
              Rapport
            {% endif %}
          </div>

          <div class="card-body p-0 table-responsive">
            <table class="table table-bordered border-black table-hover table-sm align-middle text-center mb-0">
              <thead>
                <tr>
                  <th colspan="17" class="py-2 text-uppercase bg-warning-subtle text-dark fs-4">indicateur de Production</th>
                </tr>
                <tr>
                  <th rowspan="2" colspan="3" class="text-dark fw-bolder bg-info-subtle">Atelier</th>
                  <th rowspan="2" class="text-dark fw-bolder bg-success-subtle">Objectif par post</th>
                  <th colspan="3" class="text-dark text-uppercase fw-bolder bg-warning-subtle">post a</th>
                  <th colspan="3" class="text-dark text-uppercase fw-bolder bg-warning-subtle">post b</th>
                  <th colspan="3" class="text-dark text-uppercase fw-bolder bg-warning-subtle">post c</th>
                  <th colspan="4" class="text-dark fst-italic fw-bolder bg-orange-100">Daily Production</th>
                </tr>
                <tr>
                  <!-- Post A -->
                  <th class="text-dark fw-bolder bg-info-subtle">Réalisé shift A</th>
                  <th class="text-dark fw-bolder bg-info-subtle">Heure de marche</th>
                  <th class="text-dark fw-bolder bg-info-subtle">Productivité</th>
                  <!-- Post B -->
                  <th class="text-dark fw-bolder bg-info-subtle">Réalisé shift A</th>
                  <th class="text-dark fw-bolder bg-info-subtle">Heure de marche</th>
                  <th class="text-dark fw-bolder bg-info-subtle">Productivité</th>
                  <!-- Post C -->
                  <th class="text-dark fw-bolder bg-info-subtle">Réalisé shift A</th>
                  <th class="text-dark fw-bolder bg-info-subtle">Heure de marche</th>
                  <th class="text-dark fw-bolder bg-info-subtle">Productivité</th>
                  <!-- Daily -->
                  <th class="text-dark text-capitalize fst-italic fw-bolder bg-success-subtle">daily target</th>
                  <th class="text-dark text-capitalize fst-italic fw-bolder bg-info-subtle">totaly per day</th>
                  <th class="text-dark text-capitalize fst-italic fw-bolder bg-info-subtle">hrs de marche</th>
                  <th class="text-dark text-capitalize fst-italic fw-bolder bg-info-subtle">Productivité</th>
                </tr>
              </thead>

              <tbody>
                <tr class="text-dark">
                  <td colspan="3" class="text-dark fw-bolder h5 bg-info-subtle heith">Ciment Mill</td>
                  <td class="text-dark fw-bolder fs-6 bg-success-subtle">206</td>

                  {% comment %}Post A{% endcomment %}
                  {% if object_broy_post_06h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '06H-14H' %}
                        <td class="text-dark bg-light fw-bolder fs-6">
                          {% if object.prod %}
                            {{ object.prod }}
                          {% endif %}
                        </td>
                        <td class="text-dark bg-info-subtle fw-bolder fs-6">
                          {% if object.temp_march %}
                            {{ object.temp_march }}
                          {% endif %}
                        </td>
                        <td class="bg-info-subtle fw-bolder fs-6 {% if object.rend|default:0 > 40 %}text-success {% else %}text-danger{% endif %}">
                          {% if object.rend %}
                            {{ object.rend }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark fw-bolder fs-6 bg-light"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle">t</td>
                  {% endif %}

                  {% comment %}Post B{% endcomment %}
                  {% if object_broy_post_14h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '14H-22H' %}
                        <td class="text-dark fw-bolder fs-6 bg-light">
                          {% if object.prod %}
                            {{ object.prod }}
                          {% endif %}
                        </td>
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle">
                          {% if object.temp_march %}
                            {{ object.temp_march }}
                          {% endif %}
                        </td>
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle">
                          {% if object.rend %}
                            {{ object.rend }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark fw-bolder fs-6 bg-light"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle"></td>
                  {% endif %}

                  {% comment %}Post C{% endcomment %}
                  {% if object_broy_post_22h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '22H-06H' %}
                        <td class="text-dark fw-bolder fs-6 bg-light">
                          {% if object.prod %}
                            {{ object.prod }}
                          {% endif %}
                        </td>
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle">
                          {% if object.temp_march %}
                            {{ object.temp_march }}
                          {% endif %}
                        </td>
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle">
                          {% if object.rend %}
                            {{ object.rend }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark fw-bolder fs-6 bg-light"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle"></td>
                  {% endif %}

                  <td class="text-dark bg-success-subtle"></td>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100">
                    {% if total_prod %}
                      {{ total_prod }}
                    {% endif %}
                  </td>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100">
                    {% if total_temp_march_b %}
                      {{ total_temp_march_b }}
                    {% endif %}
                  </td>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100">
                    {% if total_rend_b %}
                      {{ total_rend_b }}
                    {% endif %}
                  </td>
                </tr>

                <tr>
                  <th class="text-dark fw-bolder bg-info-subtle wdth" colspan="2" rowspan="2">Ciment Mill</th>
                  <th class="text-dark fw-bolder bg-info-subtle" colspan="1">Consommation Energétique(MWh)</th>
                  <td class="text-dark fw-bolder bg-success-subtle">6.18</td>
                  {% comment %}Partie différence compteur broyeur{% endcomment %}
                  {% if object_broy_post_06h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '06H-14H' %}
                        <td class="text-dark fw-bolder fs-6 bg-light" colspan="3">{{ object.dif_compt }}</td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-light" colspan="3"></td>
                  {% endif %}

                  {% if object_broy_post_14h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '14H-22H' %}
                        <td class="text-dark fw-bolder fs-6 bg-light" colspan="3">{{ object.dif_compt }}</td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-light" colspan="3"></td>
                  {% endif %}

                  {% if object_broy_post_22h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '22H-06H' %}
                        <td class="text-dark fw-bolder fs-6 bg-light" colspan="3">{{ object.dif_compt }}</td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-light" colspan="3"></td>
                  {% endif %}

                  <td class="text-dark bg-success-subtle" colspan="0">30.7</td>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100" colspan="3">
                    {% if total_compt %}
                      {{ total_compt }}
                    {% endif %}
                  </td>
                </tr>

                <tr>
                  <th class="text-dark fw-bolder bg-info-subtle" colspan="1">SPC(KWh/T)</th>

                  <td class="text-dark fw-bolder bg-success-subtle">30</td>
                  {% if object_broy_post_06h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '06H-14H' %}
                        <td class="text-dark bg-info-subtle fw-bolder fs-6" colspan="3">
                          {% if object.conso %}
                            {{ object.conso }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-info-subtle fw-bolder fs-6" colspan="3"></td>
                  {% endif %}

                  {% if object_broy_post_14h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '14H-22H' %}
                        <td class="text-dark bg-info-subtle fw-bolder fs-6" colspan="3">
                          {% if object.conso %}
                            {{ object.conso }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-info-subtle fw-bolder fs-6" colspan="3"></td>
                  {% endif %}

                  {% if object_broy_post_22h %}
                    {% for object in object_broy %}
                      {% if object.post.post == '22H-06H' %}
                        <td class="text-dark bg-info-subtle fw-bolder fs-6" colspan="3">
                          {% if object.conso %}
                            {{ object.conso }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-info-subtle fw-bolder fs-6" colspan="3"></td>
                  {% endif %}

                  <td class="text-dark fw-bolder bg-success-subtle">18,54</td>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100" colspan="3">
                    {% if total_conso %}
                      {{ total_conso }}
                    {% endif %}
                  </td>
                </tr>

                {% comment %}Partie packing{% endcomment %}
                <tr>
                  <th class="text-dark fw-bolder text-capitalize bg-info-subtle" rowspan="4" colspan="2">cement dispach</th>
                  <th class="text-dark fw-bolder bg-info-subtle" colspan="1">Livraison(tonnes)</th>
                  <td class="text-dark fw-bolder bg-success-subtle">206</td>

                  {% comment %}Partie livraison et vrack{% endcomment %}
                  {% if object_post_06h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '06H-14H' %}
                        <td class="bg-light fw-bolder fs-6 {% if object.livraison|default:0 > 206 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.livraison %}
                            {{ object.livraison }}
                          {% endif %}
                        </td>
                        <td class="text-dark bg-light fw-bolder fs-6">
                          {% if object.vrack %}
                            {{ object.vrack }}
                          {% endif %}
                        </td>
                        <td class="bg-light fw-bolder fs-6 {% if object.som_liv_vrack|default:0 > 206 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.som_liv_vrack %}
                            {{ object.som_liv_vrack }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-light"></td>
                    <td class="text-dark bg-light"></td>
                    <td class="text-dark bg-light"></td>
                  {% endif %}

                  {% if object_post_14h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '14H-22H' %}
                        <td class="bg-light fw-bolder fs-6 {% if object.livraison|default:0 > 206 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.livraison %}
                            {{ object.livraison }}
                          {% endif %}
                        </td>
                        <td class="text-dark bg-light fw-bolder fs-6">
                          {% if object.vrack %}
                            {{ object.vrack }}
                          {% endif %}
                        </td>
                        <td class="bg-light fw-bolder fs-6 {% if object.som_liv_vrack|default:0 > 206 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.som_liv_vrack %}
                            {{ object.som_liv_vrack }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-light"></td>
                    <td class="text-dark bg-light"></td>
                    <td class="text-dark bg-light"></td>
                  {% endif %}

                  {% if object_post_22h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '22H-06H' %}
                        <td class="bg-light fw-bolder fs-6 {% if object.livraison|default:0 > 206 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.livraison %}
                            {{ object.livraison }}
                          {% endif %}
                        </td>
                        <td class="text-dark bg-light fw-bolder fs-6">
                          {% if object.vrack %}
                            {{ object.vrack }}
                          {% endif %}
                        </td>
                        <td class="bg-light fw-bolder fs-6 {% if object.som_liv_vrack|default:0 > 206 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.som_liv_vrack %}
                            {{ object.som_liv_vrack }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark bg-light"></td>
                    <td class="text-dark bg-light"></td>
                    <td class="text-dark bg-light"></td>
                  {% endif %}

                  <td class="text-dark fw-bolder bg-success-subtle">618</td>
                  <td class="fw-bolder fs-5 bg-orange-100 {% if total_liv|default:0 > 618 %}text-success {% else %}text-danger {% endif %}">
                    {% if total_liv %}
                      {{ total_liv }}
                    {% endif %}
                  </td>
                  <td class="fw-bolder fs-5 bg-orange-100">
                    {% if total_vrack %}
                      {{ total_vrack }}
                    {% endif %}
                  </td>
                  <td class="fw-bolder fs-5 bg-orange-100 {% if toat_som_liv_vrack|default:0 > 618 %}text-success {% else %}text-danger {% endif %}">
                    {% if toat_som_liv_vrack %}
                      {{ toat_som_liv_vrack }}
                    {% endif %}
                  </td>
                </tr>

                {% comment %}Partie des sacs ensachés{% endcomment %}
                <tr>
                  <th class="text-dark fw-bolder bg-info-subtle" colspan="1">Nombre de sacs livrés</th>
                  <th class="text-dark fw-bolder bg-success-subtle">4120</th>

                  {% if object_post_06h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '06H-14H' %}
                        <td colspan="3" class="text-dark bg-light fw-bolder fs-6">
                          {% if object.ens %}
                            {{ object.ens }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-light"></td>
                  {% endif %}

                  {% if object_post_14h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '14H-22H' %}
                        <td colspan="3" class="text-dark bg-light fw-bolder fs-6">
                          {% if object.ens %}
                            {{ object.ens }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-light"></td>
                  {% endif %}

                  {% if object_post_22h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '22H-06H' %}
                        <td colspan="3" class="text-dark bg-light fw-bolder fs-6">
                          {% if object.ens %}
                            {{ object.ens }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-light"></td>
                  {% endif %}

                  <th class="text-dark fw-bolder bg-success-subtle">12360</th>
                  <td class="text-dark fs-5 fw-bolder bg-orange-100" colspan="3">
                    {% if total_ens %}
                      {{ total_ens }}
                    {% endif %}
                  </td>
                </tr>

                {% comment %}Partie casse{% endcomment %}
                <tr>
                  <th class="text-dark fw-bolder bg-info-subtle" colspan="1">Nombre de sacs cassés</th>
                  <th class="text-dark fw-bolder bg-success-subtle">12</th>

                  {% if object_post_06h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '06H-14H' %}
                        <td colspan="3" class="text-dark bg-light fw-bolder fs-6">
                          {% if object.casse %}
                            {{ object.casse }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-light"></td>
                  {% endif %}

                  {% if object_post_14h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '14H-22H' %}
                        <td colspan="3" class="text-dark bg-light fw-bolder fs-6">
                          {% if object.casse %}
                            {{ object.casse }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-light"></td>
                  {% endif %}

                  {% if object_post_22h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '22H-06H' %}
                        <td colspan="3" class="text-dark bg-light fw-bolder fs-6">
                          {% if object.casse %}
                            {{ object.casse }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-light"></td>
                  {% endif %}

                  <th class="text-dark fw-bolder bg-success-subtle">37</th>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100" colspan="3">
                    {% if total_cas %}
                      {{ total_cas }}
                    {% endif %}
                  </td>
                </tr>

                {% comment %}Partie taux de casse{% endcomment %}
                <tr>
                  <th class="text-dark fw-bolder bg-info-subtle" colspan="1">Taux de casse</th>
                  <th class="text-dark fw-bolder bg-success-subtle">0.30%</th>
                  {% if object_post_06h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '06H-14H' %}
                        <td colspan="3" class="fw-bolder fs-6 bg-info-subtle {% if object.tx_cas|default:0 < 0.30 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.tx_cas %}
                            {{ object.tx_cas }}%
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-info-subtle"></td>
                  {% endif %}

                  {% if object_post_14h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '14H-22H' %}
                        <td colspan="3" class="fw-bolder fs-6 bg-info-subtle {% if object.tx_cas|default:0 < 0.30 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.tx_cas %}
                            {{ object.tx_cas }}%
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-info-subtle"></td>
                  {% endif %}

                  {% if object_post_22h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '22H-06H' %}
                        <td colspan="3" class="fw-bolder fs-6 bg-info-subtle {% if object.tx_cas|default:0 < 0.30 %}text-success {% else %}text-danger {% endif %}">
                          {% if object.tx_cas %}
                            {{ object.tx_cas }}%
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td colspan="3" class="text-dark bg-info-subtle"></td>
                  {% endif %}

                  <th class="text-dark fw-bolder bg-success-subtle">0.30%</th>
                  <td class="fw-bolder fs-5 bg-orange-100 {% if total_tx_cas|default:0 < 0.30 %}text-success {% else %}text-danger {% endif %}" colspan="3">
                    {% if total_tx_cas %}
                      {{ total_tx_cas }}%
                    {% endif %}
                  </td>
                </tr>

                {% comment %}Partie Rendement et Temps de marche{% endcomment %}
                <tr>
                  <th colspan="2" class="text-dark fw-bolder bg-info-subtle">Temps de marche</th>
                  <th colspan="1" class="text-dark fw-bolder bg-info-subtle">Rendement de livraison(T/H)</th>
                  <th class="text-dark fw-bolder bg-success-subtle">45</th>

                  {% if object_post_06h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '06H-14H' %}
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="2">
                          {% if object.temp_march %}
                            {{ object.temp_march }}
                          {% endif %}
                        </td>
                        <td class="fw-bolder fs-6 bg-info-subtle {% if object.rend|default:0 > 45 %}text-success {% else %}text-danger{% endif %}" colspan="1">
                          {% if object.rend %}
                            {{ object.rend }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="2"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="1"></td>
                  {% endif %}

                  {% if object_post_14h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '14H-22H' %}
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="2">
                          {% if object.temp_march %}
                            {{ object.temp_march }}
                          {% endif %}
                        </td>
                        <td class="fw-bolder fs-6 bg-info-subtle {% if object.rend|default:0 > 45 %}text-success {% else %}text-danger{% endif %}" colspan="1">
                          {% if object.rend %}
                            {{ object.rend }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="2"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="1"></td>
                  {% endif %}

                  {% if object_post_22h %}
                    {% for object in object_pack %}
                      {% if object.post.post == '22H-06H' %}
                        <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="2">
                          {% if object.temp_march %}
                            {{ object.temp_march }}
                          {% endif %}
                        </td>
                        <td class="fw-bolder fs-6 bg-info-subtle {% if object.rend|default:0 > 45 %}text-success {% else %}text-danger{% endif %}" colspan="1">
                          {% if object.rend %}
                            {{ object.rend }}
                          {% endif %}
                        </td>
                      {% endif %}
                    {% endfor %}
                  {% else %}
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="2"></td>
                    <td class="text-dark fw-bolder fs-6 bg-info-subtle" colspan="1"></td>
                  {% endif %}
                  <td class="text-dark fw-bolder bg-success-subtle"></td>
                  <td class="text-dark fw-bolder fs-5 bg-orange-100" colspan="2">
                    {% if total_temp_march %}
                      {{ total_temp_march }}
                    {% endif %}
                  </td>
                  <td class="fw-bolder fs-5 bg-orange-100 {% if total_rend|default:0 > 45 %}text-success {% else %}text-danger{% endif %}" colspan="1">
                    {% if total_rend %}
                      {{ total_rend }}
                    {% endif %}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Deuxième bloc : arrêts -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card shadow-sm rounded-3">
          <div class="card-body p-0 table-responsive">
            <table class="table table-bordered border-black table-hover table-sm text-center align-middle mb-0">
              <thead></thead>
              <tbody>
                {% comment %}la partie des arrêt de broyage{% endcomment %}
                <tr>
                  <th class="bg-info-subtle text-dark fs-3" colspan="8">Arrêts au Broyage</th>
                </tr>
                <tr>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Shift</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Dédut Arrêt</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Fin Arrêt</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark" colspan="2">Durée</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">DEPT</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Descrition Arrêt</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Solutions Apportées</th>
                </tr>
                {% for object in object_panne %}
                  <tr>
                    <td class="text-dark bg-violet fw-bold fs-5">{{ object.broyage.post }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.start_panne }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.end_panne }}</td>
                    <td class="text-dark bg-violet fw-bold fs-6">{{ object.duree_formatee }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.temp_arret }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.departement }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.description }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.solution }}</td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="9" class="fst-italic text-muted">Aucune panne enregistrée pour cette journée.</td>
                  </tr>
                {% endfor %}

                {% comment %}la partie des arrêt de packing{% endcomment %}
                <tr>
                  <th class="bg-info-subtle text-dark fs-3" colspan="8">Arrêts à l'Ensachage</th>
                </tr>
                <tr>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Shift</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Dédut Arrêt</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Fin Arrêt</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark" colspan="2">Durée</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">DEPT</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Descrition Arrêt</th>
                  <th class="bg-info-subtle fs-5 fw-bold text-dark">Solutions Apportées</th>
                </tr>
                {% for object in object_pann %}
                  <tr>
                    <td class="text-dark bg-violet fw-bold fs-5">{{ object.packing.post }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.start_panne }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.end_panne }}</td>
                    <td class="text-dark bg-violet fw-bold fs-6">{{ object.duree_formatee }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.temp_arret }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.departement }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.description }}</td>
                    <td class="text-dark bg-light fw-bold fs-6">{{ object.solution }}</td>
                  </tr>
                {% empty %}
                  <tr>
                    <td colspan="9" class="fst-italic text-muted">Aucune panne enregistrée pour cette journée.</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Styles personnalisés -->
  <style>
    /* Couleurs adoucies */
    .bg-orange-100 {
      background-color: #fbc793 !important;
    }
    .bg-success-subtle {
      background-color: #b8f3bdff !important;
    }
    .bg-info-subtle {
      background-color: #c2d6f4ff !important;
    }
    .bg-warning-subtle {
      background-color: #fff6d6 !important;
    }
    .bg-violet {
      background-color: #c5b9f3ed !important;
      color: #fff !important;
    }
    
    /* Tailles et espacements */
    .heith {
      height: 160px !important;
    } /* réduit par rapport à l'original pour moins de poids visuel */
    .wdth {
      width: 30px !important;
    }
    table th,
    table td {
      vertical-align: middle !important;
      padding: 0.55rem !important;
      font-size: 0.95rem;
    }
    
    /* Sticky thead for better navigation when scrolling */
    thead th {
      position: sticky;
      top: 0;
      z-index: 5;
      backdrop-filter: blur(2px);
    }
    
    /* Card header visual */
    .card-header {
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .heith {
        height: auto !important;
      }
      table {
        font-size: 0.88rem;
      }
    }
  </style>
{% endblock %}
